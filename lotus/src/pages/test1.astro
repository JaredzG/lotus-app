---
import { ViewTransitions } from "astro:transitions"
import "@/styles/globals.css"
import { cn } from "@/lib/utils"
---
<html>
  <head>
    <!-- <ViewTransitions /> -->
  </head>
  <body class={cn("bg-slate-900 overflow-x-hidden")}>
    <div class={cn("h-[150dvh] w-dvw")}></div>
    <div class={cn("big-container h-[200dvh] w-dvw bg-zinc-600")}>
      <div class={cn("pinned-container h-dvh w-dvw bg-stone-700 flex flex-col items-center justify-between p-28")}>
        <div class={cn("container-item h-52 w-52 bg-red-900")}>
          <!-- <h2 class={cn("hello text-transparent font-bold text-8xl text-center bg-clip-text bg-gradient-to-r from-pink-700 to-violet-700")}>Hello World</h2> -->
        </div>
        <div class={cn("container-item h-52 w-52 bg-red-900")}>
          <!-- <h2 class={cn("hello text-transparent font-bold text-8xl text-center bg-clip-text bg-gradient-to-r from-pink-700 to-violet-700")}>Hello World</h2> -->
        </div>
        <div class={cn("container-item h-52 w-52 bg-red-900")}>
          <!-- <h2 class={cn("hello text-transparent font-bold text-8xl text-center bg-clip-text bg-gradient-to-r from-pink-700 to-violet-700")}>Hello World</h2> -->
        </div>
      </div>
    </div>
    <div class={cn("h-[150dvh] w-dvw")}></div>
    <script>
      import { gsap } from "gsap";
      import { ScrollTrigger } from "gsap/dist/ScrollTrigger";

      ScrollTrigger.create({
        trigger: ".big-container",
        start: "top top",
        end: "bottom bottom",
        pin: ".pinned-container",
        scrub: true,
        markers: false,
      });
      
      const items = gsap.utils.toArray(".container-item");
      const animation = gsap.from(items, {
        opacity: 0,
        y: 100,
        ease: "power1.inOut",
        duration: 5,
        stagger: 1
      })

      ScrollTrigger.create({
        trigger: ".pinned-container",
        start: "top center",
        end: "bottom bottom",
        animation: animation,
        scrub: true,
        markers: false
      })
    </script>
    <style>
      .fadeOut {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        height: 100dvh;
        width: 100dvw;
        z-index: 9999;
        pointer-events: none;
        animation: fadeOut 2s ease-in forwards;
      }

      @keyframes fadeOut {
        from {
            background-color: rgba(0, 0, 0, 1);
        }
        to {
            background-color: rgba(0, 0, 0, 0);
        }
      }

    </style>
    <script>
      import { initLenisAndGSAP } from "@/lib/utils";
      initLenisAndGSAP();
    </script>
  </body>
</html>